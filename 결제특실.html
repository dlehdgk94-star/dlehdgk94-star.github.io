<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment â€“ Insta Hotel - mainbranch</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        /* [ê¸°ë³¸ ìŠ¤íƒ€ì¼ ì„¤ì •] */
        html { scroll-behavior: smooth; }
        body { margin: 0; padding: 0; font-family: 'Poppins', 'Noto Sans KR', sans-serif; background-color: #f4f4f4; color: #333; }
        
        .payment-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 100px 20px 60px;
        }

        /* í¼ ìŠ¤íƒ€ì¼ */
        input[type="text"], input[type="email"], textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-bottom: 10px;
            font-family: inherit;
            font-size: 14px;
        }
        
        /* ë¼ë””ì˜¤/ì²´í¬ë°•ìŠ¤ ìŠ¤íƒ€ì¼ - ì£¼í™©ìƒ‰ ê°•ì¡° */
        input[type="checkbox"], input[type="radio"] {
            margin-right: 5px;
            vertical-align: middle;
            accent-color: #ff6900;
            width: 18px; 
            height: 18px;
            cursor: pointer;
        }
        
        label { vertical-align: middle; cursor: pointer; }

        /* íƒ€ì´í‹€ & ê·¸ë¦¬ë“œ */
        .page-title {
            text-align: center;
            padding-bottom: 40px;
            font-size: 28px;
            font-weight: 700;
            color: #333;
        }
        .checkout-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
        }

        /* ì¹´ë“œ ì„¹ì…˜ */
        .section-card {
            background: white;
            padding: 30px;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        .section-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 20px;
            border-bottom: 2px solid #eee;
            padding-bottom: 15px;
            color: #222;
        }

        /* ìƒí’ˆ ì •ë³´ */
        .product-info { display: flex; gap: 20px; }
        .product-img {
            width: 120px;
            height: 120px;
            background-color: #eee;
            object-fit: cover;
            border-radius: 4px;
        }
        .product-details h3 { font-size: 18px; font-weight: 700; margin-bottom: 8px; }
        .product-details p { font-size: 14px; color: #666; margin-bottom: 5px; }
        .price { font-weight: bold; font-size: 18px; margin-top: 15px; color: #ff6900; }

        /* ì…ë ¥ í¼ ë ˆì´ì•„ì›ƒ */
        .input-row { display: flex; gap: 10px; }
        .input-half { width: 50%; }

        /* ì•ˆë‚´ ë°•ìŠ¤ */
        .info-box {
            background-color: #fff0e6;
            border-left: 4px solid #ff6900;
            padding: 15px;
            margin-bottom: 20px;
            font-size: 13px;
            color: #555;
            line-height: 1.5;
        }
        .notice-text {
            font-size: 13px;
            color: #666;
            line-height: 1.6;
            margin-bottom: 10px;
        }
        .confirm-check {
            display: flex;
            align-items: center;
            margin-top: 15px;
            margin-bottom: 10px;
            font-size: 14px;
            font-weight: 500;
        }

        /* í…Œì´ë¸” */
        .refund-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 13px;
            margin-bottom: 15px;
        }
        .refund-table th, .refund-table td {
            border: 1px solid #eee;
            padding: 12px;
            text-align: left;
        }
        .refund-table th { background-color: #f9f9f9; width: 60%; font-weight: 600; }

        /* ìš°ì¸¡ ê²°ì œ ìš”ì•½ */
        .price-summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            font-size: 14px;
            color: #555;
        }
        .total-price-row {
            display: flex;
            justify-content: space-between;
            border-top: 2px solid #eee;
            padding-top: 20px;
            margin-top: 10px;
            font-weight: bold;
            font-size: 18px;
            align-items: center;
        }
        .total-price { color: #ff6900; font-size: 24px; }

        /* ì„ íƒí•œ ì˜µì…˜ ë¦¬ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ */
        .option-detail-list { 
            margin-top: 5px; 
            margin-bottom: 15px;
            font-size: 13px; 
            color: #666; 
            background-color: #fafafa;
            padding: 10px;
            border-radius: 4px;
        }
        .option-detail-list ul { 
            margin-top: 4px; 
            padding-left: 15px; 
            list-style: disc; 
        }
        .option-detail-list li {
            margin-bottom: 2px;
        }

        .payment-method label { 
            display: flex; 
            align-items: center; 
            margin-right: 15px; 
            font-size: 14px; 
        }
        .terms-list { list-style: none; margin-top: 10px; padding: 0; }
        .terms-list li { margin-bottom: 10px; font-size: 13px; color: #666; display: flex; justify-content: space-between; align-items: center; }
        .terms-list li.main-check {
            font-weight: bold; color: #333; margin-bottom: 15px; border-bottom: 1px solid #eee; padding-bottom: 10px;
        }
        .term-link { color: #888; text-decoration: underline; font-size: 11px; cursor: pointer; }

        .btn-submit {
            width: 100%;
            background-color: #ff6900;
            color: white;
            border: none;
            padding: 18px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            border-radius: 4px;
            transition: background-color 0.2s;
            margin-top: 20px;
        }
        .btn-submit:hover { background-color: #e05e00; }

        /* íŒì—… ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
        .modal {
            display: none;
            position: fixed; 
            z-index: 100; 
            left: 0;
            top: 0;
            width: 100%; 
            height: 100%; 
            overflow: auto; 
            background-color: rgba(0,0,0,0.5); 
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background-color: #fefefe;
            margin: auto;
            padding: 20px;
            border: 1px solid #888;
            width: 90%;
            max-width: 600px;
            border-radius: 8px;
            position: relative;
            max-height: 90vh;
            overflow-y: auto;
        }

        .close-btn {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            position: absolute;
            right: 20px;
            top: 10px;
        }

        .close-btn:hover,
        .close-btn:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }

        @media (max-width: 768px) {
            .payment-container { padding-top: 80px; }
            .checkout-grid { grid-template-columns: 1fr; gap: 20px; }
            .product-info { flex-direction: row; }
            .product-img { width: 80px; height: 80px; }
        }
    </style>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<script>
    const supabaseUrl = 'https://eyasihczaqsacenklhns.supabase.co'
    const supabaseKey = 'sb_publishable_KgiOOQUrWJzQTDCZnbhGcw_otKoMO27'
    
    // window ê°ì²´ì— ë‹´ì•„ì„œ ì–´ë””ì„œë“  êº¼ë‚´ ì“¸ ìˆ˜ ìˆê²Œ í•¨
    window.supabaseClient = window.supabase.createClient(supabaseUrl, supabaseKey)
    
    console.log("í™ˆí˜ì´ì§€-ìŠˆíŒŒë² ì´ìŠ¤ ì—°ê²° ì„±ê³µ!");
</script>
</head>
<body class="bg-[#f4f4f4] text-slate-900 font-sans">

    <header id="header" class="fixed top-0 left-0 right-0 z-30 text-white transition-colors duration-300 bg-[#ff6900] shadow-lg">
        <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between relative h-14">
          <button id="mobile-menu-btn" class="md:hidden text-white flex items-center focus:outline-none drop-shadow-md">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-8 h-8">
              <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
            </svg>
          </button>
          <a href="index.html" class="absolute left-1/2 transform -translate-x-1/2 md:static md:translate-x-0 md:flex items-center drop-shadow-md">
            <span class="text-2xl font-bold tracking-tight md:hidden">Insta hotel</span>
            <span class="hidden md:block text-2xl font-semibold tracking-tight">Insta Hotel - mainbranch</span>
          </a>
          
          <nav class="hidden md:flex items-center gap-8 text-sm font-medium drop-shadow-md">
            <a href="about.html" class="hover:text-orange-200" data-i18n="nav_about">about</a>
            <a href="rooms.html" class="hover:text-orange-200" data-i18n="nav_rooms">rooms</a>
            <a href="ì¡°ì‹ë©”ë‰´íŒ.html" class="hover:text-orange-200 transition-colors" data-i18n="nav_breakfast">breakfast</a>
            <a href="reservation.html" class="hover:text-orange-200 underline underline-offset-4" data-i18n="nav_reservation">reservation</a>
            <a href="instaspot.html" class="hover:text-orange-200" data-i18n="nav_instaspot">insta spot</a>
            <a href="#lounge" class="hover:text-orange-200" data-i18n="nav_lounge">bluerain lounge</a>
            <a href="contact.html" class="hover:text-orange-200" data-i18n="nav_contact">contact</a>
          </nav>

          <div class="flex items-center relative drop-shadow-md">
             <div class="flex items-center gap-1 cursor-pointer relative">
                <span id="current-flag-icon" class="text-2xl shadow-sm rounded-sm leading-none pt-1">ğŸ‡°ğŸ‡·</span>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 text-white opacity-90">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                </svg>
                <select id="header-lang-select" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer appearance-none">
                    <option value="ko">ğŸ‡°ğŸ‡· í•œêµ­ì–´</option>
                    <option value="en">ğŸ‡ºğŸ‡¸ English</option>
                    <option value="ja">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</option>
                    <option value="zh">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</option>
                </select>
             </div>
          </div>
        </div>
    </header>

    <main class="payment-container">
        <h2 class="page-title" data-i18n="page_title">ê²°ì œí•˜ê¸°</h2>

        <div class="checkout-grid">
            
            <div class="left-column">
                
                <div class="section-card">
                    <div class="section-title" data-i18n="sect_product">ì˜ˆì•½ ìƒí’ˆ ì •ë³´</div>
                    <div class="product-info">
                        <img src="hero2.jpg" alt="ê°ì‹¤ ì´ë¯¸ì§€" class="product-img">
                        <div class="product-details">
                            <h3 data-i18n="room_name">íŠ¹ì‹¤ (Special)</h3>
                            <p><span data-i18n="label_schedule">ì¼ì •</span>: <span id="display-nights" data-i18n="text_1night">1ë°•</span> (<span id="display-date-range" data-i18n="text_date_unselected">ë‚ ì§œ ë¯¸ì„ íƒ</span>)</p>
                            <p><span data-i18n="label_guests">ì¸ì›</span>: <span data-i18n="text_capacity">ì„±ì¸ 2ëª… (ìµœëŒ€ 4ëª… ë¬´ë£Œ)</span></p>
                            <div class="price" id="display-room-price-info">0ì›</div>
                        </div>
                    </div>
                </div>

                <div class="section-card">
    <div class="section-title" data-i18n="sect_booker">ì˜ˆì•½ì ì •ë³´</div>
    
    <div class="input-row">
        <div class="input-half">
            <input type="text" id="input-name" placeholder="ì´ë¦„ (Name)">
        </div>
        <div class="input-half">
            <input type="text" id="input-phone" placeholder="ì—°ë½ì²˜ (Phone)">
        </div>
    </div>

    <input type="email" id="input-email" placeholder="ì´ë©”ì¼ (E-mail)">
    
    <div style="font-size: 12px; color: #ff6900; margin-top: 15px; margin-bottom: 5px; font-weight: 500;">
        * <span data-i18n="msg_sns_follow">ìš°ë¦¬ì™€ SNS íŒ”ë¡œìš°ë¥¼ í•˜ë©´ ì˜ˆì•½ì •ë³´ë¥¼ ê°„í¸í•˜ê³  ë¹ ë¥´ê²Œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span>
    </div>

    <div class="input-row">
        <div class="input-half">
            <input type="text" id="input-instagram" placeholder="Instagram">
        </div>
        <div class="input-half">
            <input type="text" id="input-tiktok" placeholder="Tiktok">
        </div>
    </div>
    
    <input type="text" id="input-request" placeholder="ìš”ì²­ì‚¬í•­ (Requests)" style="margin-top: 10px;">
</div>

                <div class="section-card">
                    <div class="section-title" data-i18n="sect_extra">ì¶”ê°€ì •ë³´ ì…ë ¥</div>
                    <div class="info-box" data-i18n="notice_confirm_email">
                        ì˜ˆì•½ í™•ì •ì€ ì´ë©”ì¼ ì•Œë¦¼ì„ ë°›ìœ¼ì…”ì•¼ ì™„ë£Œë©ë‹ˆë‹¤.
                    </div>
                    <p class="notice-text">
                        <strong data-i18n="label_about_res">ì˜ˆì•½ê³¼ ê´€ë ¨í•˜ì—¬ â€¢</strong><br>
                        * <span data-i18n="notice_checkin">insta hotel email (yhl5258@naver.com)ì„ ë°›ìœ¼ì…”ì•¼ ì˜ˆì•½ í™•ì •ì´ ëœ ê²ƒì…ë‹ˆë‹¤.<br>
                        * ì²´í¬ì¸ ë‹¹ì¼ í˜„ì¥ì—ì„œ ì˜ˆì•½ì ë³¸ì¸ í™•ì¸ì´ ì§„í–‰ë©ë‹ˆë‹¤.</span>
                    </p>
                    
                    <label class="confirm-check">
                        <input type="radio" name="confirm1" id="chk-info"> &nbsp;<span data-i18n="label_checked">í™•ì¸í–ˆìŠµë‹ˆë‹¤.</span>
                    </label>
                </div>

                <div class="section-card">
                    <div class="section-title" data-i18n="sect_refund">ì·¨ì†Œ/í™˜ë¶ˆ ê·œì •ì— ëŒ€í•œ ë™ì˜</div>
                    <table class="refund-table">
                        <tr>
                            <th data-i18n="th_8days">ì´ìš© 8ì¼ ì „ê¹Œì§€</th>
                            <td data-i18n="td_free">ì·¨ì†Œìˆ˜ìˆ˜ë£Œ ì—†ìŒ</td>
                        </tr>
                        <tr>
                            <th data-i18n="th_7days">ì´ìš© ë‹¹ì¼ ~ ì´ìš© 7ì¼ ì „ê¹Œì§€</th>
                            <td data-i18n="td_no_refund">í™˜ë¶ˆë¶ˆê°€ëŠ¥</td>
                        </tr>
                    </table>
                    <label class="confirm-check">
                        <input type="checkbox" id="chk-refund"> &nbsp;<span data-i18n="label_agree_refund">ì·¨ì†Œ ë° í™˜ë¶ˆ ê·œì •ì— ë™ì˜í•©ë‹ˆë‹¤.</span>
                    </label>
                </div>

            </div>

            <div class="right-column">
                
                <div class="section-card">
                    <div class="section-title" data-i18n="sect_total">ìµœì¢… ê²°ì œê¸ˆì•¡</div>
                    <div class="price-summary-row">
                        <span data-i18n="label_room_price">ê°ì‹¤ ê°€ê²©</span>
                        <span id="summary-room-price">0ì›</span>
                    </div>
                    <div class="price-summary-row">
                        <span data-i18n="label_option">ì˜µì…˜(ì¡°ì‹ ë“±)</span>
                         <span id="summary-option-price">0ì›</span>
                    </div>

                    <div id="option-detail-list" class="option-detail-list" style="display:none;"></div>

                    <div class="total-price-row">
                        <span data-i18n="label_total_price">ì´ ê²°ì œê¸ˆì•¡</span>
                         <span class="total-price" id="summary-total-price">0ì›</span>
                    </div>
                </div>

                <div class="section-card">
                    <div class="section-title" data-i18n="sect_method">ê²°ì œìˆ˜ë‹¨</div>
                    <div class="payment-method">
                        <label><input type="radio" name="payment" checked> <span data-i18n="label_credit_card">ì‹ ìš©ì¹´ë“œ</span></label>
                    </div>
                </div>

                <div class="section-card" style="border:none; box-shadow:none; padding: 0; background:none;">
                    <ul class="terms-list">
                        <li class="main-check">
                            <label><input type="checkbox" id="chk-all"> <span data-i18n="label_all_agree">ì „ì²´ ë™ì˜</span></label>
                        </li>
                        <li>
                            <label><input type="checkbox" class="chk-sub"> <span data-i18n="label_privacy">ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš© ë™ì˜</span></label>
                            <span class="term-link" onclick="openModal()" data-i18n="btn_view_terms">ì•½ê´€ë³´ê¸°</span>
                        </li>
                        <li>
                            <label><input type="checkbox" class="chk-sub"> <span data-i18n="label_condition">êµ¬ë§¤ì¡°ê±´ í™•ì¸ ë° ê²°ì œì§„í–‰ ë™ì˜</span></label>
                        </li>
                    </ul>
                </div>

                <button class="btn-submit" onclick="requestPayment()" data-i18n="btn_pay">ê²°ì œí•˜ê¸°</button>

            </div>
        </div>
    </main>

    <div id="termsModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal()">&times;</span>
            <img src="ì•½ê´€ë³´ê¸°.png" alt="ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš© ë™ì˜" style="width: 100%;">
        </div>
    </div>

    <section id="contact" class="pt-10 pb-12 bg-white border-t border-slate-200">
        <div class="max-w-4xl mx-auto px-4 text-center text-xs text-slate-600 space-y-3">
            <div class="flex justify-center gap-4 text-lg"> 
                <a href="https://www.instagram.com/instahotel_mainbranch/" target="_blank"><img src="icons8-ì¸ìŠ¤-íƒ€-ê·¸ë¨-48.png" alt="Instagram" width="24" height="24"></a>
                <a href="https://map.naver.com/p/entry/place/1630717211" target="_blank"><img src="icons8-ë„¤ì´ë²„-64.png" alt="Naver" width="24" height="24"></a>
                <a href="http://pf.kakao.com/_xiITuG" target="_blank"><img src="icons8-ì¹´ì¹´ì˜¤-í†¡-48.png" alt="KakaoTalk" width="24" height="24"></a>
                <a href="https://www.facebook.com/VIPdesign2020" target="_blank"><img src="icons8-í˜ì´ìŠ¤-ë¶-48.png" alt="Facebook" width="24" height="24"></a>           
            </div>
            <div class="space-y-1">
                <p>insta hotel mainbranch, Korea</p>
                <p id="companyName" data-i18n="footer_company">(ì£¼)í˜¸í…”ì¸ìŠ¤íƒ€</p>
                <p id="ceoName" data-i18n="footer_ceo">ëŒ€í‘œì : ì´ì˜í™˜</p>
                <p id="bizNumber" data-i18n="footer_biz">í†µì‹ íŒë§¤ì—… ì‹ ê³ ë²ˆí˜¸: 2023-ìˆ˜ì›ì˜í†µ-1696í˜¸</p>
                <p id="address" data-i18n="footer_addr">ìˆ˜ì›ì‹œ ì˜í†µêµ¬ ì˜í†µë¡œ 94-6</p>
                <p>Business License 176-24-01388 | Tel 031-203-4301</p>
            </div>
        </div>
    </section>

    <script>
        const translations = {
            ko: {
                flag: "ğŸ‡°ğŸ‡·",
                unit_won: "ì›",
                unit_night: "ë°•",
                alert_agree: "ëª¨ë‘ ë™ì˜ë¥¼ í•´ì•¼ ê²°ì œë¥¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
                alert_done: "ì˜ˆì•½ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤! (ê´€ë¦¬ì í™•ì¸ í›„ ë©”ì¼ì´ ë°œì†¡ë©ë‹ˆë‹¤)",
                alert_fill_all: "ì˜ˆì•½ì ì •ë³´ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.",
                alert_error: "ì˜ˆì•½ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.",
                
                nav_about: "about", nav_rooms: "rooms", nav_reservation: "reservation", nav_contact: "contact",
                nav_breakfast: "breakfast", nav_instaspot: "insta spot", nav_lounge: "bluerain lounge",
                
                page_title: "ê²°ì œí•˜ê¸°",
                sect_product: "ì˜ˆì•½ ìƒí’ˆ ì •ë³´",
                room_name: "íŠ¹ì‹¤ (Special)",
                label_schedule: "ì¼ì •",
                label_guests: "ì¸ì›",
                text_1night: "1ë°•",
                text_date_unselected: "ë‚ ì§œ ë¯¸ì„ íƒ",
                text_capacity: "ì„±ì¸ 2ëª… (ìµœëŒ€ 4ëª… ë¬´ë£Œ)",
                
                sect_booker: "ì˜ˆì•½ì ì •ë³´",
                ph_name: "ì´ë¦„ (Name)",
                ph_phone: "ì—°ë½ì²˜ (Phone)",
                ph_email: "ì´ë©”ì¼ (E-mail)",
                ph_request: "ìš”ì²­ì‚¬í•­ (Requests)",
                msg_sns_follow: "ìš°ë¦¬ì™€ SNS íŒ”ë¡œìš°ë¥¼ í•˜ë©´ ì˜ˆì•½ì •ë³´ë¥¼ ê°„í¸í•˜ê³  ë¹ ë¥´ê²Œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
                
                sect_extra: "ì¶”ê°€ì •ë³´ ì…ë ¥",
                notice_confirm_email: "ì˜ˆì•½ í™•ì •ì€ ì´ë©”ì¼ ì•Œë¦¼ì„ ë°›ìœ¼ì…”ì•¼ ì™„ë£Œë©ë‹ˆë‹¤.",
                label_about_res: "ì˜ˆì•½ê³¼ ê´€ë ¨í•˜ì—¬ â€¢",
                notice_checkin: "insta hotel email (yhl5258@naver.com)ì„ ë°›ìœ¼ì…”ì•¼ ì˜ˆì•½ í™•ì •ì´ ëœ ê²ƒì…ë‹ˆë‹¤.<br>* ì²´í¬ì¸ ë‹¹ì¼ í˜„ì¥ì—ì„œ ì˜ˆì•½ì ë³¸ì¸ í™•ì¸ì´ ì§„í–‰ë©ë‹ˆë‹¤.",
                label_checked: "í™•ì¸í–ˆìŠµë‹ˆë‹¤.",
                
                sect_refund: "ì·¨ì†Œ/í™˜ë¶ˆ ê·œì •ì— ëŒ€í•œ ë™ì˜",
                th_8days: "ì´ìš© 8ì¼ ì „ê¹Œì§€",
                td_free: "ì·¨ì†Œìˆ˜ìˆ˜ë£Œ ì—†ìŒ",
                th_7days: "ì´ìš© ë‹¹ì¼ ~ ì´ìš© 7ì¼ ì „ê¹Œì§€",
                td_no_refund: "í™˜ë¶ˆë¶ˆê°€ëŠ¥",
                label_agree_refund: "ì·¨ì†Œ ë° í™˜ë¶ˆ ê·œì •ì— ë™ì˜í•©ë‹ˆë‹¤.",
                
                sect_total: "ìµœì¢… ê²°ì œê¸ˆì•¡",
                label_room_price: "ê°ì‹¤ ê°€ê²©",
                label_option: "ì˜µì…˜(ì¡°ì‹ ë“±)",
                label_total_price: "ì´ ê²°ì œê¸ˆì•¡",
                label_option_list: "ì„ íƒí•œ ì˜µì…˜",
                
                sect_method: "ê²°ì œìˆ˜ë‹¨",
                label_credit_card: "ì‹ ìš©ì¹´ë“œ",
                
                label_all_agree: "ì „ì²´ ë™ì˜",
                label_privacy: "ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš© ë™ì˜",
                btn_view_terms: "ì•½ê´€ë³´ê¸°",
                label_condition: "êµ¬ë§¤ì¡°ê±´ í™•ì¸ ë° ê²°ì œì§„í–‰ ë™ì˜",
                btn_pay: "ê²°ì œí•˜ê¸°",
                
                footer_company: "(ì£¼)í˜¸í…”ì¸ìŠ¤íƒ€", 
                footer_ceo: "ëŒ€í‘œì : ì´ì˜í™˜", 
                footer_biz: "í†µì‹ íŒë§¤ì—… ì‹ ê³ ë²ˆí˜¸: 2023-ìˆ˜ì›ì˜í†µ-1696í˜¸", 
                footer_addr: "ìˆ˜ì›ì‹œ ì˜í†µêµ¬ ì˜í†µë¡œ 94-6"
            },
            en: {
                flag: "ğŸ‡ºğŸ‡¸",
                unit_won: " KRW",
                unit_night: " nights",
                alert_agree: "You must agree to all terms to proceed.",
                alert_done: "Booking Completed! (Email will be sent after confirmation)",
                alert_fill_all: "Please fill in all guest information.",
                alert_error: "An error occurred while saving the reservation. Please try again.",
                
                nav_about: "about", nav_rooms: "rooms", nav_reservation: "reservation", nav_contact: "contact",
                nav_breakfast: "breakfast", nav_instaspot: "insta spot", nav_lounge: "bluerain lounge",
                
                page_title: "Payment",
                sect_product: "Booking Info",
                room_name: "Special Room",
                label_schedule: "Schedule",
                label_guests: "Guests",
                text_1night: "1 night",
                text_date_unselected: "Date not selected",
                text_capacity: "2 Adults (Max 4 Free)",
                
                sect_booker: "Guest Info",
                ph_name: "Name",
                ph_phone: "Phone Number",
                ph_email: "E-mail Address",
                ph_request: "Requests",
                msg_sns_follow: "Follow us on SNS to check reservation info quickly and easily.",
                
                sect_extra: "Additional Info",
                notice_confirm_email: "Booking is confirmed only after receiving the email notification.",
                label_about_res: "About Reservation â€¢",
                notice_checkin: "You must receive an email from insta hotel (yhl5258@naver.com) to confirm.<br>* ID verification required at check-in.",
                label_checked: "I have checked.",
                
                sect_refund: "Cancellation & Refund Policy",
                th_8days: "Up to 8 days prior",
                td_free: "Free Cancellation",
                th_7days: "7 days prior ~ Day of stay",
                td_no_refund: "Non-refundable",
                label_agree_refund: "I agree to the policy.",
                
                sect_total: "Payment Summary",
                label_room_price: "Room Price",
                label_option: "Options",
                label_total_price: "Total Amount",
                label_option_list: "Selected Options",
                
                sect_method: "Payment Method",
                label_credit_card: "Credit Card",
                
                label_all_agree: "Agree to All",
                label_privacy: "Consent to Collection & Use of Personal Info",
                btn_view_terms: "View Terms",
                label_condition: "Confirm Order & Agree to Payment",
                btn_pay: "Pay Now",
                
                footer_company: "Insta Hotel Co., Ltd.", 
                footer_ceo: "CEO: Lee Young Hwan", 
                footer_biz: "Reg: 2023-Suwon Yeongtong-1696", 
                footer_addr: "94-6, Yeongtong-ro, Yeongtong-gu, Suwon-si"
            },
            ja: {
                flag: "ğŸ‡¯ğŸ‡µ",
                unit_won: " ã‚¦ã‚©ãƒ³",
                unit_night: " æ³Š",
                alert_agree: "ã™ã¹ã¦ã®è¦ç´„ã«åŒæ„ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚",
                alert_done: "äºˆç´„ãŒå®Œäº†ã—ã¾ã—ãŸï¼(ç¢ºèªå¾Œã«ãƒ¡ãƒ¼ãƒ«ãŒé€ä¿¡ã•ã‚Œã¾ã™)",
                alert_fill_all: "äºˆç´„è€…æƒ…å ±ã‚’ã™ã¹ã¦å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚",
                alert_error: "äºˆç´„ã®ä¿å­˜ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚",
                
                nav_about: "about", nav_rooms: "rooms", nav_reservation: "reservation", nav_contact: "contact",
                nav_breakfast: "breakfast", nav_instaspot: "insta spot", nav_lounge: "bluerain lounge",
                
                page_title: "æ±ºæ¸ˆ",
                sect_product: "äºˆç´„æƒ…å ±",
                room_name: "ã‚¹ãƒšã‚·ãƒ£ãƒ« (Special)",
                label_schedule: "æ—¥ç¨‹",
                label_guests: "äººæ•°",
                text_1night: "1æ³Š",
                text_date_unselected: "æ—¥ä»˜æœªé¸æŠ",
                text_capacity: "å¤§äºº2å (æœ€å¤§4åç„¡æ–™)",
                
                sect_booker: "äºˆç´„è€…æƒ…å ±",
                ph_name: "åå‰",
                ph_phone: "é€£çµ¡å…ˆ",
                ph_email: "ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹",
                ph_request: "ãƒªã‚¯ã‚¨ã‚¹ãƒˆ",
                msg_sns_follow: "SNSã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã™ã‚‹ã¨ã€äºˆç´„æƒ…å ±ã‚’ç°¡å˜ã‹ã¤è¿…é€Ÿã«ç¢ºèªã§ãã¾ã™ã€‚",
                
                sect_extra: "è¿½åŠ æƒ…å ±",
                notice_confirm_email: "äºˆç´„ç¢ºå®šã¯ãƒ¡ãƒ¼ãƒ«é€šçŸ¥ã‚’å—ä¿¡ã—ãŸæ™‚ç‚¹ã§å®Œäº†ã—ã¾ã™ã€‚",
                label_about_res: "äºˆç´„ã«ã¤ã„ã¦ â€¢",
                notice_checkin: "Insta Hotelã®ãƒ¡ãƒ¼ãƒ«(yhl5258@naver.com)ã‚’å—ä¿¡ã™ã‚‹ã¨äºˆç´„ç¢ºå®šã¨ãªã‚Šã¾ã™ã€‚<br>* ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³æ™‚ã«æœ¬äººç¢ºèªãŒè¡Œã‚ã‚Œã¾ã™ã€‚",
                label_checked: "ç¢ºèªã—ã¾ã—ãŸã€‚",
                
                sect_refund: "ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒ»æ‰•ã„æˆ»ã—è¦å®š",
                th_8days: "åˆ©ç”¨8æ—¥å‰ã¾ã§",
                td_free: "ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ–™ãªã—",
                th_7days: "åˆ©ç”¨7æ—¥å‰ã€œå½“æ—¥",
                td_no_refund: "æ‰•ã„æˆ»ã—ä¸å¯",
                label_agree_refund: "è¦å®šã«åŒæ„ã—ã¾ã™ã€‚",
                
                sect_total: "æ±ºæ¸ˆé‡‘é¡",
                label_room_price: "å®¢å®¤ä¾¡æ ¼",
                label_option: "ã‚ªãƒ—ã‚·ãƒ§ãƒ³",
                label_total_price: "ç·æ±ºæ¸ˆé‡‘é¡",
                label_option_list: "é¸æŠã—ãŸã‚ªãƒ—ã‚·ãƒ§ãƒ³",
                
                sect_method: "æ±ºæ¸ˆæ‰‹æ®µ",
                label_credit_card: "ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰",
                
                label_all_agree: "ã™ã¹ã¦åŒæ„ã™ã‚‹",
                label_privacy: "å€‹äººæƒ…å ±ã®åé›†ãŠã‚ˆã³åˆ©ç”¨ã¸ã®åŒæ„",
                btn_view_terms: "ç´„æ¬¾ã‚’è¦‹ã‚‹",
                label_condition: "æ³¨æ–‡å†…å®¹ç¢ºèªãŠã‚ˆã³æ±ºæ¸ˆé€²è¡Œã¸ã®åŒæ„",
                btn_pay: "æ±ºæ¸ˆã™ã‚‹",
                
                footer_company: "ã‚¤ãƒ³ã‚¹ã‚¿ãƒ›ãƒ†ãƒ«æ ªå¼ä¼šç¤¾", 
                footer_ceo: "ä»£è¡¨è€… : ã‚¤ãƒ»ãƒ¨ãƒ³ãƒ•ã‚¡ãƒ³", 
                footer_biz: "ç™»éŒ²ç•ªå·: 2023-æ°´åŸéœŠé€š-1696", 
                footer_addr: "æ°´åŸå¸‚éœŠé€šåŒºéœŠé€šè·¯94-6"
            },
            zh: {
                flag: "ğŸ‡¨ğŸ‡³",
                unit_won: " éŸ©å…ƒ",
                unit_night: " æ™š",
                alert_agree: "å¿…é¡»åŒæ„æ‰€æœ‰æ¡æ¬¾æ‰èƒ½ä»˜æ¬¾ã€‚",
                alert_done: "é¢„è®¢å·²å®Œæˆï¼(ç¡®è®¤åå°†å‘é€é‚®ä»¶)",
                alert_fill_all: "è¯·å¡«å†™æ‰€æœ‰é¢„è®¢äººä¿¡æ¯ã€‚",
                alert_error: "ä¿å­˜é¢„è®¢æ—¶å‘ç”Ÿé”™è¯¯ã€‚",
                
                nav_about: "about", nav_rooms: "rooms", nav_reservation: "reservation", nav_contact: "contact",
                nav_breakfast: "breakfast", nav_instaspot: "insta spot", nav_lounge: "bluerain lounge",
                
                page_title: "æ”¯ä»˜",
                sect_product: "é¢„è®¢ä¿¡æ¯",
                room_name: "ç‰¹å®¤ (Special)",
                label_schedule: "æ—¥ç¨‹",
                label_guests: "äººæ•°",
                text_1night: "1æ™š",
                text_date_unselected: "æœªé€‰æ‹©æ—¥æœŸ",
                text_capacity: "æˆäºº2å (æœ€å¤š4åå…è´¹)",
                
                sect_booker: "é¢„è®¢äººä¿¡æ¯",
                ph_name: "å§“å",
                ph_phone: "è”ç³»æ–¹å¼",
                ph_email: "ç”µå­é‚®ç®±",
                ph_request: "ç‰¹æ®Šè¦æ±‚",
                msg_sns_follow: "å…³æ³¨æˆ‘ä»¬çš„SNSï¼Œå³å¯è½»æ¾å¿«é€Ÿåœ°ç¡®è®¤é¢„è®¢ä¿¡æ¯ã€‚",
                
                sect_extra: "é™„åŠ ä¿¡æ¯",
                notice_confirm_email: "æ”¶åˆ°ç”µå­é‚®ä»¶é€šçŸ¥åï¼Œé¢„è®¢å³ç¡®è®¤ä¸ºå®Œæˆã€‚",
                label_about_res: "å…³äºé¢„è®¢ â€¢",
                notice_checkin: "æ”¶åˆ° Insta Hotel é‚®ä»¶ (yhl5258@naver.com) å³è¡¨ç¤ºé¢„è®¢å·²ç¡®è®¤ã€‚<br>* å…¥ä½æ—¶å°†è¿›è¡Œæœ¬äººèº«ä»½éªŒè¯ã€‚",
                label_checked: "å·²ç¡®è®¤ã€‚",
                
                sect_refund: "å–æ¶ˆ/é€€æ¬¾è§„å®š",
                th_8days: "å…¥ä½8å¤©å‰",
                td_free: "æ— å–æ¶ˆè´¹ç”¨",
                th_7days: "å…¥ä½7å¤©å‰ ~ å½“å¤©",
                td_no_refund: "ä¸å¯é€€æ¬¾",
                label_agree_refund: "åŒæ„ç›¸å…³è§„å®šã€‚",
                
                sect_total: "æœ€ç»ˆæ”¯ä»˜é‡‘é¢",
                label_room_price: "å®¢æˆ¿ä»·æ ¼",
                label_option: "é€‰é¡¹",
                label_total_price: "æ€»æ”¯ä»˜é‡‘é¢",
                label_option_list: "å·²é€‰æ‹©çš„é€‰é¡¹",
                
                sect_method: "æ”¯ä»˜æ–¹å¼",
                label_credit_card: "ä¿¡ç”¨å¡",
                
                label_all_agree: "å…¨éƒ¨åŒæ„",
                label_privacy: "åŒæ„æ”¶é›†å’Œä½¿ç”¨ä¸ªäººä¿¡æ¯",
                btn_view_terms: "æŸ¥çœ‹æ¡æ¬¾",
                label_condition: "ç¡®è®¤è®¢å•å¹¶åŒæ„æ”¯ä»˜",
                btn_pay: "æ”¯ä»˜",
                
                footer_company: "Insta Hotelæœ‰é™å…¬å¸", 
                footer_ceo: "ä»£è¡¨ï¼šææ°¸ç„•", 
                footer_biz: "æ³¨å†Œå·ï¼š2023-æ°´åŸçµé€š-1696", 
                footer_addr: "æ°´åŸå¸‚çµé€šåŒºçµé€šè·¯94-6"
            }
        };

        let currentLang = 'ko';

        function updateLanguage(lang) {
            currentLang = lang;
            const t = translations[lang];

            // 1. êµ­ê¸° ì•„ì´ì½˜ ì—…ë°ì´íŠ¸
            document.getElementById("current-flag-icon").textContent = t.flag;

            // 2. data-i18n ì†ì„±ì´ ìˆëŠ” ëª¨ë“  ìš”ì†Œ ì—…ë°ì´íŠ¸
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (t[key]) {
                    el.innerHTML = t[key];
                }
            });

            // 3. placeholder ì†ì„± ì—…ë°ì´íŠ¸ (input íƒœê·¸)
            document.getElementById('input-name').placeholder = t.ph_name;
            document.getElementById('input-phone').placeholder = t.ph_phone;
            document.getElementById('input-email').placeholder = t.ph_email;
            document.getElementById('input-request').placeholder = t.ph_request;

            // 4. ê°€ê²© ì •ë³´ ë‹¤ì‹œ ë Œë”ë§ (ë‹¨ìœ„ ë³€ê²½ ë°˜ì˜)
            renderPriceInfo();
        }

        function renderPriceInfo() {
            const params = new URLSearchParams(window.location.search);
            
            const checkin = params.get('checkin') || "";
            const checkout = params.get('checkout') || "";
            const nights = params.get('nights') || '0';
            const roomPrice = parseInt(params.get('roomPrice')) || 0;
            const optionPrice = parseInt(params.get('optionPrice')) || 0;
            const total = parseInt(params.get('total')) || 0;

            const t = translations[currentLang];
            const unit = t.unit_won;
            const unitNight = t.unit_night;

            const fmt = (n) => n.toLocaleString() + unit;

            if(checkin && checkout) {
                document.getElementById('display-date-range').innerText = `${checkin} ~ ${checkout}`;
            }
            
            if (nights > 0) {
                document.getElementById('display-nights').innerText = nights + unitNight;
            }
            
            document.getElementById('display-room-price-info').innerText = fmt(roomPrice);
            document.getElementById('summary-room-price').innerText = fmt(roomPrice);
            document.getElementById('summary-option-price').innerText = fmt(optionPrice);
            document.getElementById('summary-total-price').innerText = fmt(total);

            // [ì˜µì…˜ ìƒì„¸ ë¦¬ìŠ¤íŠ¸ í‘œì‹œ ë¡œì§]
            const optionContainer = document.getElementById('option-detail-list');
            const optionDetailsRaw = params.get('optionDetails');
            let optionDetails = [];

            if (optionDetailsRaw) {
                try {
                    optionDetails = JSON.parse(decodeURIComponent(optionDetailsRaw));
                } catch (e) {
                    console.error("ì˜µì…˜ íŒŒì‹± ì—ëŸ¬", e);
                }
            }

            if (optionDetails.length > 0) {
                optionContainer.style.display = 'block';
                const listHtml = optionDetails.map(item => `<li>${item}</li>`).join('');
                optionContainer.innerHTML = `
                    <div style="font-weight:bold; margin-bottom:5px;">${t.label_option_list}:</div>
                    <ul>${listHtml}</ul>
                `;
            } else {
                optionContainer.style.display = 'none';
                optionContainer.innerHTML = '';
            }
        }

        window.onload = function() {
            updateLanguage('ko');

            const headerSelect = document.getElementById("header-lang-select");
            if(headerSelect) {
                headerSelect.addEventListener("change", (e) => {
                    updateLanguage(e.target.value);
                });
            }
        };

        const chkAll = document.getElementById('chk-all');
        const subChks = document.querySelectorAll('.chk-sub');

        chkAll.addEventListener('change', function() {
            subChks.forEach(chk => chk.checked = this.checked);
        });

        subChks.forEach(chk => {
            chk.addEventListener('change', function() {
                const allChecked = Array.from(subChks).every(c => c.checked);
                chkAll.checked = allChecked;
            });
        });

        const modal = document.getElementById("termsModal");

        function openModal() {
            modal.style.display = "flex"; 
        }

        function closeModal() {
            modal.style.display = "none";
        }

        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }

        // [í•µì‹¬] Supabase ì €ì¥ í•¨ìˆ˜ (ìš”ì²­í•œ ì»¬ëŸ¼ëª… ì‚¬ìš©)
        async function requestPayment() {
            const t = translations[currentLang];

            // 1. ë™ì˜ ì²´í¬ í™•ì¸
            const isInfoChecked = document.getElementById('chk-info').checked;
            const isRefundChecked = document.getElementById('chk-refund').checked;
            const isTermsChecked = document.getElementById('chk-all').checked;

            if (!isInfoChecked || !isRefundChecked || !isTermsChecked) {
                alert(t.alert_agree);
                return;
            }

            // 2. ì…ë ¥ ë°ì´í„° ìˆ˜ì§‘
            const guestName = document.getElementById('input-name').value.trim();
            const guestPhone = document.getElementById('input-phone').value.trim();
            const guestEmail = document.getElementById('input-email').value.trim();
            const instagramId = document.getElementById('input-instagram').value.trim();
            const tiktokId = document.getElementById('input-tiktok').value.trim();
            const requestMsg = document.getElementById('input-request').value.trim();

            if (!guestName || !guestPhone || !guestEmail) {
                alert(t.alert_fill_all);
                return;
            }

            // 3. URL íŒŒë¼ë¯¸í„° ê°€ì ¸ì˜¤ê¸°
            const params = new URLSearchParams(window.location.search);
            const checkin = params.get('checkin');
            const checkout = params.get('checkout');
            const nights = parseInt(params.get('nights')) || 0;
            const total = parseInt(params.get('total')) || 0;
            const roomPrice = parseInt(params.get('roomPrice')) || 0; 
            const optionDetailsRaw = params.get('optionDetails');
            
            let optionDetails = [];
            if (optionDetailsRaw) {
                try {
                    optionDetails = JSON.parse(decodeURIComponent(optionDetailsRaw));
                } catch (e) {
                    console.error("ì˜µì…˜ íŒŒì‹± ì—ëŸ¬", e);
                }
            }

            // 4. Supabase ì €ì¥ìš© ë°ì´í„° (ìš”ì²­í•œ ì»¬ëŸ¼ëª… ë§¤í•‘)
            const bookingData = {
                room_id: 6,                     // íŠ¹ì‹¤ ID
                guest_name: guestName,
                guest_phone: guestPhone,
                
                guest_email: guestEmail,        // ìš”ì²­ ì»¬ëŸ¼: ì´ë©”ì¼
                social_insta: instagramId,      // ìš”ì²­ ì»¬ëŸ¼: ì¸ìŠ¤íƒ€
                social_tiktok: tiktokId,        // ìš”ì²­ ì»¬ëŸ¼: í‹±í†¡
                guest_request: requestMsg,      // ìš”ì²­ ì»¬ëŸ¼: ìš”ì²­ì‚¬í•­
                
                check_in_date: checkin,
                check_out_date: checkout,
                nights: nights,
                
                room_price: roomPrice,          // ìš”ì²­ ì»¬ëŸ¼: ê°ì‹¤ê°€ê²©
                selected_options: optionDetails,// ìš”ì²­ ì»¬ëŸ¼: ì„ íƒì˜µì…˜ (JSON)
                total_price: total,             // ìš”ì²­ ì»¬ëŸ¼: ì´ê¸ˆì•¡
                
                status: 'confirmed'             // ìš”ì²­ ì»¬ëŸ¼: ê²°ì œìƒíƒœ
            };

            // 5. Insert ì‹¤í–‰
            try {
                const { data, error } = await window.supabaseClient
                    .from('bookings')
                    .insert([bookingData]);

                if (error) {
                    console.error('Supabase Error:', error);
                    alert(t.alert_error + "\n" + error.message);
                } else {
                    alert(t.alert_done);
                    window.location.href = 'index.html'; 
                }
            } catch (err) {
                console.error('Unexpected Error:', err);
                alert(t.alert_error);
            }
        }
    </script>
</body>
</html>
